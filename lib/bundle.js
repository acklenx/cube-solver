!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cube-solver",[],t):"object"==typeof exports?exports["cube-solver"]=t():e["cube-solver"]=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[],o=(t.factorial=function e(t){return 0===t||1===t?1:r[t]>0?r[t]:(r[t]=e(t-1)*t,r[t])},[]);t.choose=function(e,t){if(t>e)return 0;for(;e>=o.length;){var n=o.length,r=[];r[0]=1;for(var a=1,i=n-1;a<n;a+=1)r[a]=o[i][a-1]+o[i][a];r[n]=1,o.push(r)}return o[e][t]},t.cartesian=function(e){var t=[],n=e.length-1;return function r(o,a){for(var i=0;i<e[a].length;i+=1){var u=o.slice(0);u.push(e[a][i]),a===n?t.push(u):r(u,a+1)}}([],0),t},t.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e)+1)+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPermutationFromIndex=t.getIndexFromPermutation=t.getParity=t.getOrientationFromIndex=t.getIndexFromOrientation=void 0;var r=n(0),o=function(e,t,n){for(var r=e[t],o=t;o<n;o+=1)e[o]=e[o+1];e[n]=r},a=function(e,t,n){for(var r=e[n],o=n;o>t;o-=1)e[o]=e[o-1];e[t]=r};t.getIndexFromOrientation=function(e,t){for(var n=0,r=0;r<e.length-1;r+=1)n=t*n+e[r];return n},t.getOrientationFromIndex=function(e,t,n){for(var r=[],o=0,a=t-2;a>=0;a-=1){var i=e%n;e=Math.floor(e/n),r[a]=i,o+=i}return r[t-1]=(n-o%n)%n,r},t.getParity=function(e){for(var t=0,n=e.length-1;n>0;n-=1)for(var r=n-1;r>=0;r-=1)e[r]>e[n]&&(t+=1);return t%2},t.getIndexFromPermutation=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.length-1,i=0,u=1,l=[];if(n)for(var f=e.length-1;f>=0;f-=1)t.indexOf(e[f])>=0&&(a=Math.min(a,e[f]),i+=(0,r.choose)(e.length-1-f,u),l.unshift(e[f]),u+=1);else for(var s=0;s<e.length;s+=1)t.indexOf(e[s])>=0&&(a=Math.min(a,e[s]),i+=(0,r.choose)(s,u),l.push(e[s]),u+=1);for(var c=0,d=l.length-1;d>0;d-=1){for(var v=0;l[d]!==t[d];)o(l,0,d),v+=1;c=(d+1)*c+v}return(0,r.factorial)(t.length)*i+c},t.getPermutationFromIndex=function(e,t,n){for(var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(0,r.factorial)(t.length),u=Math.floor(e/i),l=e%i,f=[],s=0;s<n;s+=1)f.push(-1);for(var c=1;c<t.length;c+=1){var d=l%(c+1);for(l=Math.floor(l/(c+1));d>0;)a(t,0,c),d-=1}var v=t.length-1;if(o)for(var m=0;m<n;m+=1){var h=(0,r.choose)(n-1-m,v+1);u-h>=0&&(f[m]=t[t.length-1-v],u-=h,v-=1)}else for(var g=n-1;g>=0;g-=1){var b=(0,r.choose)(g,v+1);u-b>=0&&(f[g]=t[v],u-=b,v-=1)}return f}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),f=n(3),s=n(4),c=r(s),d=n(5),v=r(d),m=[1,10,4,13,6,7,8,15,16,17],h=void 0,g=void 0,b=void 0,p=void 0,P=function(){p=[];for(var e=0;e<336;e+=1){p.push([]);for(var t=0;t<336;t+=1)p[e][t]=function(e,t){for(var n=(0,l.getPermutationFromIndex)(e,[0,1,2],12),r=(0,l.getPermutationFromIndex)(t,[3,4,5],12),o=0;o<8;o+=1)if(-1!==n[o]){if(-1!==r[o])return-1;r[o]=n[o]}return(0,l.getIndexFromPermutation)(r,[0,1,2,3,4,5])}(e,t)}return{moveTables:[new c.default({name:"slicePermutation",size:24,table:b.table}),h,g,(0,s.createEdgePermutationTable)({name:"URToDF",size:20160,moves:m,affected:[0,1,2,3,4,5]})],pruningTables:[["slicePermutation","parity","URFToDLF"],["slicePermutation","parity","URToDF"]]}},x=new v.default(P,m),T=function(){return h=new c.default({name:"parity",size:2,table:[[1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1],[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]]}),g=(0,s.createCornerPermutationTable)({name:"URFToDLF",affected:[0,1,2,3,4,5]}),b=(0,s.createEdgePermutationTable)({name:"slice",affected:[8,9,10,11],reversed:!0}),x.initialize(),{moveTables:[new c.default({name:"slicePosition",size:495,table:b.table,doMove:function(e,t,n){return Math.floor(e[24*t][n]/24)}}),(0,s.createCornerOrientationTable)({name:"twist",affected:[0,1,2,3,4,5,6,7]}),(0,s.createEdgeOrientationTable)({name:"flip",affected:[0,1,2,3,4,5,6,7,8,9,10,11]}),b,h,g,(0,s.createEdgePermutationTable)({name:"URToUL",affected:[0,1,2]}),(0,s.createEdgePermutationTable)({name:"UBToDF",affected:[3,4,5]})],pruningTables:[["slicePosition","flip"],["slicePosition","twist"]]}},O=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var u=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return u.maxDepth=22,u.solution=null,u}return i(t,e),u(t,[{key:"handleSolution",value:function(e,t){var n=e.slice(-1)[0];if(n%2==0&&6===Math.floor(n/3)&&15===Math.floor(n/3))return!1;var r=x.solve({indexes:[t[3],t[4],t[5],p[t[6]][t[7]]],maxDepth:this.maxDepth-e.length,lastMove:n,format:!1});if(r){if(this.solution=e.concat(r.solution),this.maxDepth<=this.settings.maxDepth)return{solution:this.solution,indexes:t};this.maxDepth=this.solution.length-1}return!1}}]),t}(v.default),y=new O(T),M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:22;return Array.isArray(e)?(0,f.formatAlgorithm)(y.solve({indexes:e,format:!1,maxDepth:t}).solution):(0,f.formatAlgorithm)(y.solve({scramble:e,format:!1,maxDepth:t}).solution)};t.default=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={"":0,2:1,"'":2},o=t.validateAlgorithm=function(e){return/^([FRUBLD][2']?\s*)+$/.test(e)};t.parseAlgorithm=function(e){if(!o(e))throw new Error("Invalid algorithm provided to algorithm parser");var t=[];return e.match(/[FRUBLD][2']?/g).forEach(function(e){var n="FRUBLD".indexOf(e.charAt(0)),o=r[e.charAt(1)];t.push(3*n+o)}),t},t.formatAlgorithm=function(e){var t="";return e.forEach(function(e){switch(t+=" ",t+="FRUBLD".charAt(Math.floor(e/3)),e%3){case 1:t+="2";break;case 2:t+="'"}}),t.trim()}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.createCornerOrientationTable=t.createEdgeOrientationTable=t.createEdgePermutationTable=t.createCornerPermutationTable=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=n(7),u=n(0),l=function(e,t,n){return function(r,o){var a=e(r);return a=t(a,o),n(a)}},f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],s=function(){function e(t){var n=this;if(r(this,e),this.name=t.name,this.size=t.size,this.defaultIndex=t.defaultIndex||0,this.solvedIndexes=t.solvedIndexes||[this.defaultIndex],this.doMove=function(e,r){return t.doMove?t.doMove(n.table,e,r):n.table[e][r]},t.table)return void(this.table=t.table);var o=l(t.getVector,t.cubieMove,t.getIndex);this.createMoveTable(t.size,o,t.moves)}return o(e,[{key:"createMoveTable",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;this.table=[];for(var r=0;r<e;r+=1)this.table.push([]);for(var o=0;o<e;o+=1)for(var a=0;a<n.length;a+=1){var i=n[a];if(!this.table[o][i]){var u=t(o,i),l=i-i%3*2+2;this.table[o][i]=u,this.table[u][l]=o}}}}]),e}(),c=(t.createCornerPermutationTable=function(e){return new s({name:e.name,moves:e.moves,defaultIndex:(0,a.getIndexFromPermutation)([0,1,2,3,4,5,6,7],e.affected,e.reversed),size:e.size||(0,u.factorial)(8)/(0,u.factorial)(8-e.affected.length),getVector:function(t){return(0,a.getPermutationFromIndex)(t,e.affected.slice(),8,e.reversed)},cubieMove:i.cornerPermutationMove,getIndex:function(t){return(0,a.getIndexFromPermutation)(t,e.affected,e.reversed)}})},t.createEdgePermutationTable=function(e){return new s({name:e.name,moves:e.moves,defaultIndex:(0,a.getIndexFromPermutation)([0,1,2,3,4,5,6,7,8,9,10,11],e.affected,e.reversed),size:e.size||(0,u.factorial)(12)/(0,u.factorial)(12-e.affected.length),getVector:function(t){return(0,a.getPermutationFromIndex)(t,e.affected.slice(),12,e.reversed)},cubieMove:i.edgePermutationMove,getIndex:function(t){return(0,a.getIndexFromPermutation)(t,e.affected,e.reversed)}})},function(e,t,n){for(var r=[],o=Math.pow(n,t-1),i=Math.pow(n,t-e.length-1),u=0;u<o&&r.length<i;u+=1)!function(o){var i=(0,a.getOrientationFromIndex)(o,t,n);e.every(function(e){return 0===i[e]})&&r.push(o)}(u);return r});t.createEdgeOrientationTable=function(e){return new s({name:e.name,size:2048,solvedIndexes:c(e.affected,12,2),getVector:function(e){return(0,a.getOrientationFromIndex)(e,12,2)},cubieMove:i.edgeOrientationMove,getIndex:function(e){return(0,a.getIndexFromOrientation)(e,2)}})},t.createCornerOrientationTable=function(e){return new s({name:e.name,size:2187,solvedIndexes:c(e.affected,8,3),getVector:function(e){return(0,a.getOrientationFromIndex)(e,8,3)},cubieMove:i.cornerOrientationMove,getIndex:function(e){return(0,a.getIndexFromOrientation)(e,3)}})};t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),i=n(8),u=function(e){return e&&e.__esModule?e:{default:e}}(i),l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;r(this,e),this.createTables=t,this.moves=n}return o(e,[{key:"initialize",value:function(){var e=this;this.initialized=!0;var t=this.createTables(),n=t.moveTables,r=t.pruningTables;this.moveTables=n,this.pruningTables=[],r.forEach(function(t){var n=t.map(function(t){return e.moveTables.map(function(e){return e.name}).indexOf(t)});n.sort(function(t,n){return e.moveTables[t].size-e.moveTables[n].size});var r=[];n.forEach(function(t){return r.push(e.moveTables[t])});var o=new u.default(r,e.moves);e.pruningTables.push({pruningTable:o,moveTableIndexes:n})})}},{key:"handleSolution",value:function(e,t){return{solution:e,indexes:t}}},{key:"search",value:function(e,t,n,r){for(var o=0,a=0;a<this.pruningTables.length;a+=1){for(var i=e[this.pruningTables[a].moveTableIndexes[0]],u=1,l=1;l<this.pruningTables[a].moveTableIndexes.length;l+=1)u*=this.moveTables[this.pruningTables[a].moveTableIndexes[l-1]].size,i+=e[this.pruningTables[a].moveTableIndexes[l]]*u;var f=this.pruningTables[a].pruningTable.getPruningValue(i);if(f>t)return!1;f>o&&(o=f)}if(0===o)return this.handleSolution(r,e);if(t>0)for(var s=0;s<this.moves.length;s+=1){var c=this.moves[s];if(Math.floor(c/3)!==Math.floor(n/3)&&Math.floor(c/3)!==Math.floor(n/3)-3){for(var d=[],v=0;v<e.length;v+=1)d.push(this.moveTables[v].doMove(e[v],c));var m=this.search(d,t-1,c,r.concat([c]));if(m)return m}}return!1}},{key:"solve",value:function(e){var t=this;this.initialized||this.initialize(),this.settings=Object.assign({maxDepth:22,lastMove:null,format:!0},e);var n=this.settings.indexes||[];if(this.settings.scramble){for(var r=(0,a.parseAlgorithm)(this.settings.scramble),o=0;o<this.moveTables.length;o+=1)n.push(this.moveTables[o].defaultIndex);r.forEach(function(e){for(var r=0;r<n.length;r+=1)n[r]=t.moveTables[r].doMove(n[r],e)})}for(var i=0;i<=this.settings.maxDepth;i+=1){var u=this.search(n,i,this.settings.lastMove,[]);if(u)return this.settings.format?(0,a.formatAlgorithm)(u.solution):u}return!1}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(2),a=r(o),i=n(9),u=r(i),l=n(10);e.exports={solve:a.default,getRandomScramble:u.default,crossSolver:l.crossSolver,firstBlockSolver:l.firstBlockSolver,EOLineSolver:l.EOLineSolver}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[[1,8,5,9],[0,11,4,8],[1,2,3,0],[3,10,7,11],[2,9,6,10],[5,4,7,6]],o=[[1,0,4,5],[0,3,7,4],[0,1,2,3],[3,2,6,7],[2,1,5,6],[5,4,7,6]],a=function(e,t){var n=e.slice(0);n[t[0]]=e[t[t.length-1]];for(var r=1;r<t.length;r+=1)n[t[r]]=e[t[r-1]];return n},i=function(e,t,n){for(var r=e,o=n[Math.floor(t/3)],i=t%3,u=0;u<=i;u+=1)r=a(r,o);return r},u=t.edgePermutationMove=function(e,t){return i(e,t,r)},l=t.cornerPermutationMove=function(e,t){return i(e,t,o)};t.edgeOrientationMove=function(e,t){var n=Math.floor(t/3),o=r[n],a=t%3,i=u(e,t);if((0===n||3===n)&&a%2==0)for(var l=0;l<4;l+=1)i[o[l]]=(i[o[l]]+1)%2;return i},t.cornerOrientationMove=function(e,t){var n=Math.floor(t/3),r=o[n],a=t%3,i=l(e,t);if(2!==n&&5!==n&&a%2==0)for(var u=0;u<4;u+=1)i[r[u]]=(i[r[u]]+(u+1)%2+1)%3;return i}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=function(){function e(t,n){r(this,e),this.computePruningTable(t,n)}return o(e,[{key:"setPruningValue",value:function(e,t){this.table[e>>3]^=(15^t)<<((7&e)<<2)}},{key:"getPruningValue",value:function(e){return this.table[e>>3]>>((7&e)<<2)&15}},{key:"computePruningTable",value:function(e,t){var n=e.reduce(function(e,t){return e*t.size},1);this.table=[];for(var r=0;r<n+7>>3;r+=1)this.table.push(-1);for(var o=0,i=0,u=[1],l=1;l<e.length;l+=1)u.push(e[l-1].size*u[l-1]);for(var f=(0,a.cartesian)(e.map(function(e){return e.solvedIndexes})),s=0;s<f.length;s+=1){for(var c=0,d=0;d<f[s].length;d+=1)c+=u[d]*f[s][d];this.setPruningValue(c,0),i+=1}for(;i!==n;){var v=i>n/2,m=v?15:o,h=v?o:15;o+=1;for(var g=0;g<n;g+=1)if(this.getPruningValue(g)===m)for(var b=0;b<t.length;b+=1){for(var p=t[b],P=g,x=0,T=u.length-1;T>=0;T-=1)x+=u[T]*e[T].doMove(Math.floor(P/u[T]),p),P%=u[T];if(this.getPruningValue(x)===h){if(i+=1,v){this.setPruningValue(g,o);break}this.setPruningValue(x,o)}}}}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(0),a=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(){var e=void 0,t=void 0,n=void 0,a=void 0;do{e=(0,r.getOrientationFromIndex)((0,o.getRandomInt)(0,2048),12,2),n=(0,r.getOrientationFromIndex)((0,o.getRandomInt)(0,2187),8,3),t=(0,r.getPermutationFromIndex)((0,o.getRandomInt)(0,479001600),[0,1,2,3,4,5,6,7,8,9,10,11],12),a=(0,r.getPermutationFromIndex)((0,o.getRandomInt)(0,40320),[0,1,2,3,4,5,6,7],8)}while((0,r.getParity)(t)!==(0,r.getParity)(a));var u=[Math.floor((0,r.getIndexFromPermutation)(t,[8,9,10,11],!0)/24),(0,r.getIndexFromOrientation)(n,3),(0,r.getIndexFromOrientation)(e,2),(0,r.getIndexFromPermutation)(t,[8,9,10,11],!0),(0,r.getParity)(a),(0,r.getIndexFromPermutation)(a,[0,1,2,3,4,5]),(0,r.getIndexFromPermutation)(t,[0,1,2]),(0,r.getIndexFromPermutation)(t,[3,4,5])];return(0,i.default)(u)};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EOLineSolver=t.firstBlockSolver=t.crossSolver=void 0;var r=n(4),o=n(5),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=new a.default(function(){return{moveTables:[(0,r.createEdgePermutationTable)({name:"EdgePermutation",affected:[4,5,6,7]}),(0,r.createEdgeOrientationTable)({name:"EdgeOrientation",affected:[4,5,6,7]})],pruningTables:[["EdgePermutation"],["EdgeOrientation"]]}}),u=(t.crossSolver=function(e){return i.solve({scramble:e})},new a.default(function(){return{moveTables:[(0,r.createEdgeOrientationTable)({name:"EdgeOrientation",affected:[6,9,10]}),(0,r.createCornerOrientationTable)({name:"CornerOrientation",affected:[5,6]}),(0,r.createEdgePermutationTable)({name:"EdgePermutation",affected:[6,9,10]}),(0,r.createCornerPermutationTable)({name:"CornerPermutation",affected:[5,6]})],pruningTables:[["EdgeOrientation","CornerPermutation"],["CornerOrientation","CornerPermutation"],["EdgePermutation","CornerPermutation"]]}})),l=(t.firstBlockSolver=function(e){return u.solve({scramble:e})},new a.default(function(){return{moveTables:[(0,r.createEdgeOrientationTable)({name:"EdgeOrientation",affected:[0,1,2,3,4,5,6,7,8,9,10,11]}),(0,r.createEdgePermutationTable)({name:"EdgePermutation",affected:[5,7]})],pruningTables:[["EdgeOrientation"],["EdgePermutation"]]}}));t.EOLineSolver=function(e){return l.solve({scramble:e})}}])});